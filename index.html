<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Match Zimmerman | human-ai creative systems</title>
  <meta name="description" content="human-ai creative systems" />

  <style>
    :root {
      --bg: #000;
      --fg: #fff;
      --glass: rgba(0,0,0,0.4);
      --glass-border: rgba(255,255,255,0.08);
      --linkColor: #ffffff;
    }

    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
    }

    .bg { position: fixed; inset: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
    #bgCanvas { filter: brightness(0.7) contrast(1.05) saturate(1.1); }
    #bgVideo { object-fit: cover; filter: brightness(0.7) contrast(1.05) saturate(1.1); }

    .bg-fallback { position: fixed; inset: 0; background: #000; z-index: -1; }

    .terminal {
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      width: min(90vw, 820px);
      padding: clamp(18px, 4vw, 32px);
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 18px;
      backdrop-filter: blur(6px);
      box-shadow: 0 20px 60px rgba(0,0,0,0.55);
      z-index: 2;
    }

    .output { line-height: 1.6; white-space: pre-wrap; }
    .line.embed iframe { display: block; margin-left: 0; }

    .cursor {
      display:inline-block;
      width:0.6ch;
      animation: blink 1.1s steps(1) infinite;
    }
    @keyframes blink { 50% { opacity:0; } }

    .link a {
      color: var(--linkColor);
      text-decoration: none;
      border-bottom: 1px solid var(--linkColor);
    }

    .top-left {
      position: fixed;
      top:16px; left:16px;
      z-index:3;
      font-size:14px;
      line-height:1.5;
      opacity:0.85;
    }

    .top-left a { color: var(--fg); text-decoration:none; }

    .top-right {
      position: fixed;
      top:16px; right:16px;
      z-index:3;
    }

    .btn {
      display:inline-flex;
      padding:10px 14px;
      border-radius:12px;
      cursor:pointer;
      border:1px solid var(--glass-border);
      background:var(--glass);
      color:var(--fg);
    }
  </style>
</head>

<body>
  <canvas id="bgCanvas" class="bg"></canvas>

  <video id="bgVideo" class="bg" autoplay loop muted playsinline preload="auto">
    <source src="media/beacon.mp4" type="video/mp4" />
    <source src="media/beacon.webm" type="video/webm" />
  </video>
  <div class="bg-fallback"></div>

  <div class="top-left">
    <strong>Match Zimmerman</strong><br/>
    Human-AI Creative Systems<br/>
    <a href="mailto:mz@matchzimmerman.com">mz@matchzimmerman.com</a>
  </div>

  <div class="top-right">
    <button id="recolorBtn" class="btn">change colors</button>
  </div>

  <section class="terminal">
    <div id="output" class="output" aria-live="polite"></div>
  </section>

<script>
/* ---------- LINKS ---------- */
const LINKS = {
  substack: "https://matchzimmerman.substack.com/",
  linkedin: "https://www.linkedin.com/in/matchzimmerman/",
  instagram: "https://instagram.com/matchzimmerman",
  email: "mailto:mz@matchzimmerman.com",
  noema: "https://noemalab.eu/ideas/recursive-resonance-building-creative-intention-within-human-centered-machine-powered-systems/"
};

/* ---------- TERMINAL CONTENT ---------- */
const ITEMS = [
  { kind: 'text', text: 'i build and study human-ai creative systems through artistic practice.' },
  { kind: 'text', text: '' },
  { kind: 'text', text: 'i am in the process of expanding this site to encompass all of my recent art and research.' },
  { kind: 'text', text: '' },
  { kind: 'text', text: 'in the meantime, please:' },

  { kind: 'text', text: '- read my recently published essay in Noema Lab:' },
  { kind: 'link', text: '_Recursive Resonance: Building Creative Intention within Human-Centered, Machine-Powered Systems', href: LINKS.noema },

  { kind: 'text', text: '- view a video tour of my current Field Station: Magpie art exhibition' },
  { kind: 'embed', text: 'INirwyWH6iY' },

  { kind: 'text', text: '- or visit my:' },
  { kind: 'link', text: '_substack', href: LINKS.substack },
  { kind: 'link', text: '_linkedin', href: LINKS.linkedin },
  { kind: 'link', text: '_instagram', href: LINKS.instagram }
];

/* ---------- SETTINGS ---------- */
const TYPING_SPEED = 18;
const LINE_PAUSE = 400;

const out = document.getElementById('output');

/* ---------- ELEMENT HELPERS ---------- */
function makeLineEl(kind) {
  const div = document.createElement('div');
  div.className = 'line';
  if (kind === 'link') div.classList.add('link');
  if (kind === 'embed') div.classList.add('embed');
  return div;
}

function makeLine(kind, text) {
  if (kind === 'embed') {
    const div = document.createElement('div');
    div.className = 'line embed';
    div.innerHTML = `
      <iframe width="560" height="315"
        src="https://www.youtube.com/embed/${text}"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen>
      </iframe>`;
    return div;
  }
}

/* ---------- CURSOR CONTROL ---------- */
function clearCursors() {
  out.querySelectorAll('.cursor').forEach(n => n.remove());
}

function addCursor(target) {
  const c = document.createElement('span');
  c.className = 'cursor';
  c.textContent = '▌';
  target.appendChild(c);
}

/* ---------- TYPING ENGINE ---------- */
async function typeItem(item) {

  // EMBED – instantly place video
  if (item.kind === 'embed') {
    clearCursors();
    const vid = makeLine('embed', item.text);
    out.appendChild(vid);
    await wait(LINE_PAUSE);
    return;
  }

  // TEXT + LINK TYPING
  const line = makeLineEl(item.kind);
  const span = document.createElement('span');
  line.appendChild(span);
  out.appendChild(line);

  clearCursors();
  addCursor(line);

  for (let i = 0; i < item.text.length; i++) {
    span.textContent = item.text.slice(0, i + 1);
    await wait(TYPING_SPEED);
  }

  if (item.kind === 'link') {
    const a = document.createElement('a');
    a.href = item.href;
    a.textContent = item.text;
    a.target = '_blank';
    a.rel = 'noopener';

    const lc = getComputedStyle(document.documentElement).getPropertyValue('--linkColor');
    a.style.color = lc;
    a.style.borderBottomColor = lc;

    line.replaceChildren(a);
  }

  clearCursors();
  addCursor(line);
  await wait(LINE_PAUSE);
}

async function runTyping() {
  out.textContent = '';
  for (const item of ITEMS) {
    await typeItem(item);
  }
  clearCursors();
}

/* ---------- UTILITY ---------- */
function wait(ms) {
  return new Promise(r => setTimeout(r, ms));
}

/* ---------- BACKGROUND NETWORK (unchanged) ---------- */
const cv = document.getElementById('bgCanvas');
const cx = cv.getContext('2d');
let w, h, dpr;

function resize() {
  dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  w = cv.width  = Math.floor(innerWidth * dpr);
  h = cv.height = Math.floor(innerHeight * dpr);
  cv.style.width = innerWidth + 'px';
  cv.style.height = innerHeight + 'px';
}
resize();
window.addEventListener('resize', resize);

let bgHue, bgSat, bgLight, fgHue, nodeSat, nodeLight, bgColor, nodeColor;

function setPalette() {
  bgHue = Math.floor(Math.random() * 360);
  bgSat = Math.random() * 100;
  bgLight = Math.random() * 100;
  fgHue = (bgHue + 180) % 360;
  nodeSat = 40 + Math.random() * 60;
  nodeLight = 35 + Math.random() * 45;

  bgColor = `hsl(${bgHue}, ${bgSat}%, ${bgLight}%)`;
  nodeColor = `hsl(${fgHue}, ${nodeSat}%, ${nodeLight}%)`;

  document.documentElement.style.setProperty('--linkColor', nodeColor);
  document.querySelectorAll('.link a').forEach(a => {
    a.style.color = nodeColor;
    a.style.borderBottomColor = nodeColor;
  });
}
setPalette();

// network animation stays exactly as you had it …
const N = 70;
const nodes = Array.from({length:N}, () => ({
  x: Math.random()*w,
  y: Math.random()*h,
  vx:(Math.random()*2-1)*0.18*dpr,
  vy:(Math.random()*2-1)*0.18*dpr,
  r:(2.2 + Math.random()*7.8) * dpr,
  phase: Math.random()*Math.PI*2,
  speed: 0.00015 + Math.random()*0.00035
}));

function step(t){
  cx.fillStyle = bgColor;
  cx.fillRect(0,0,w,h);

  for(let i=0;i<N;i++){
    const a = nodes[i];
    a.x+=a.vx; a.y+=a.vy;
    if(a.x<0||a.x>w) a.vx*=-1;
    if(a.y<0||a.y>h) a.vy*=-1;

    const depth = 1 + 0.08*Math.sin(a.phase + t*a.speed);
    const radius = a.r * depth;

    cx.beginPath();
    cx.arc(a.x,a.y,radius,0,Math.PI*2);
    cx.fillStyle=nodeColor;
    cx.fill();

    for(let j=i+1;j<N;j++){
      const b = nodes[j];
      const dx=a.x-b.x, dy=a.y-b.y;
      const dist=Math.hypot(dx,dy);

      const depthB = 1 + 0.08*Math.sin(b.phase + t*b.speed);
      const avgDepth = (depth + depthB)/2;
      const maxDist = (160*dpr) * avgDepth;

      if(dist < maxDist){
        const alpha = 0.32*(1 - dist/maxDist);
        cx.strokeStyle = `hsla(${fgHue}, ${nodeSat}%, ${nodeLight}%, ${alpha})`;
        cx.lineWidth = (1.8*dpr)*avgDepth;
        cx.beginPath(); cx.moveTo(a.x,a.y); cx.lineTo(b.x,b.y); cx.stroke();
      }
    }
  }

  requestAnimationFrame(step);
}
requestAnimationFrame(step);

document.getElementById('recolorBtn').addEventListener('click', setPalette);

window.addEventListener('load', runTyping);
</script>

</body>
</html>
